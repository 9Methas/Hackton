"use client"

import { Search } from "lucide-react"
import { Input } from "@/components/ui/input"
import { useState } from "react"

interface ProjectNewsProps {
  viewNewsDetail: (news: { title: string; date: string; content: string; image: string }) => void
}

interface NewsItem {
  id: string
  title: string
  date: string
  excerpt: string
  content: string
  image: string
  category: string
}

export function ProjectNews({ viewNewsDetail }: ProjectNewsProps) {
  const [searchQuery, setSearchQuery] = useState("")
  const [activeCategory, setActiveCategory] = useState<string>("all")

  const news: NewsItem[] = [
    {
      id: "water-testing-june",
      title: "กิจกรรมตรวจน้ำฟรีประจำเดือนมิถุนายน",
      date: "1 มิ.ย. 2568",
      excerpt: "โครงการเครือข่ายน้ำดีจัดกิจกรรมตรวจคุณภาพน้ำฟรีให้กับชาวบ้านในพื้นที่ตำบลสุรนารี",
      content: `# กิจกรรมตรวจน้ำฟรีประจำเดือนมิถุนายน

โครงการเครือข่ายน้ำดี สุรนารี มีความยินดีที่จะประกาศจัดกิจกรรมตรวจคุณภาพน้ำฟรีให้กับชาวบ้านในพื้นที่ตำบลสุรนารี ประจำเดือนมิถุนายน 2568

## รายละเอียดกิจกรรม

**วันที่จัด**: วันเสาร์ที่ 15 และวันอาทิตย์ที่ 16 มิถุนายน 2568
**เวลา**: 09.00 - 16.00 น.
**สถานที่**: ศาลากลางบ้าน หมู่ 3 ตำบลสุรนารี

## บริการที่มีให้

1. **ตรวจคุณภาพน้ำเบื้องต้น** - ตรวจวัดค่า pH, ความกระด้าง, คลอรีนตกค้าง, เหล็ก และแมงกานีส
2. **ให้คำปรึกษาเกี่ยวกับคุณภาพน้ำ** - มีผู้เชี่ยวชาญให้คำแนะนำเกี่ยวกับการปรับปรุงคุณภาพน้ำ
3. **แจกชุดทดสอบคุณภาพน้ำอย่างง่าย** - สำหรับผู้ที่สนใจตรวจสอบคุณภาพน้ำด้วยตนเอง (จำนวนจำกัด)

## วิธีการเข้าร่วม

1. นำตัวอย่างน้ำมาในขวดสะอาด ขนาดอย่างน้อย 500 มิลลิลิตร
2. ลงทะเบียนที่จุดบริการ
3. รอรับผลการตรวจและคำแนะนำ (ใช้เวลาประมาณ 30 นาที)

## ประโยชน์ที่จะได้รับ

- ทราบคุณภาพน้ำที่ใช้ในครัวเรือน
- ได้รับคำแนะนำในการปรับปรุงคุณภาพน้ำ
- เรียนรู้วิธีการตรวจสอบคุณภาพน้ำเบื้องต้นด้วยตนเอง

## หมายเหตุ

- กิจกรรมนี้ไม่มีค่าใช้จ่าย
- จำกัดจำนวนผู้เข้าร่วมวันละ 50 ราย
- สามารถลงทะเบียนล่วงหน้าได้ที่ อสม. ประจำหมู่บ้าน

สอบถามข้อมูลเพิ่มเติมได้ที่ ศูนย์ประสานงานโครงการเครือข่ายน้ำดี สุรนารี โทร. 0xx-xxx-xxxx`,
      image: "/placeholder.svg?height=200&width=300",
      category: "event",
    },
    {
      id: "well-maintenance-training",
      title: "อบรมการดูแลบ่อน้ำบาดาลเบื้องต้น",
      date: "15 พ.ค. 2568",
      excerpt: "เชิญชวนผู้สนใจเข้าร่วมอบรมการดูแลบ่อน้ำบาดาลเบื้องต้น ฟรี ไม่มีค่าใช้จ่าย",
      content: `# อบรมการดูแลบ่อน้ำบาดาลเบื้องต้น

โครงการเครือข่ายน้ำดี สุรนารี ขอเชิญชวนประชาชนในพื้นที่ตำบลสุรนารีและพื้นที่ใกล้เคียงเข้าร่วมการอบรมการดูแลบ่อน้ำบาดาลเบื้องต้น

## รายละเอียดการอบรม

**วันที่จัด**: วันเสาร์ที่ 25 พฤษภาคม 2568
**เวลา**: 09.00 - 16.00 น.
**สถานที่**: ห้องประชุมองค์การบริหารส่วนตำบลสุรนารี

## หัวข้อการอบรม

1. **ความรู้พื้นฐานเกี่ยวกับน้ำบาดาล**
   - แหล่งกำเนิดและการไหลของน้ำบาดาล
   - ประเภทของชั้นน้ำบาดาล
   - คุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี

2. **การดูแลรักษาบ่อน้ำบาดาล**
   - การตรวจสอบสภาพบ่อน้ำบาดาลเบื้องต้น
   - การบำรุงรักษาปั๊มน้ำและอุปกรณ์
   - การป้องกันการปนเปื้อน

3. **การแก้ไขปัญหาเบื้องต้น**
   - ปัญหาน้ำขุ่น น้ำมีกลิ่น
   - ปัญหาปั๊มน้ำไม่ทำงาน
   - ปัญหาน้ำไหลน้อย

4. **ภาคปฏิบัติ**
   - การตรวจสอบคุณภาพน้ำเบื้องต้น
   - การบำรุงรักษาปั๊มน้ำ
   - การแก้ไขปัญหาเบื้องต้น

## วิทยากร

- คุณสมชาย ใจดี - ผู้เชี่ยวชาญด้านน้ำบาดาล กรมทรัพยากรน้ำบาดาล
- คุณวิชัย รักษ์น้ำ - วิศวกรเครื่องกล ผู้เชี่ยวชาญด้านปั๊มน้ำ
- ทีมงานโครงการเครือข่ายน้ำดี สุรนารี

## สิ่งที่ผู้เข้าอบรมจะได้รับ

- เอกสารประกอบการอบรม
- ชุดทดสอบคุณภาพน้ำอย่างง่าย
- อาหารกลางวันและอาหารว่าง
- ใบประกาศนียบัตรการเข้าร่วมอบรม

## การลงทะเบียน

- รับจำนวนจำกัดเพียง 50 ท่าน
- ลงทะเบียนได้ที่ อสม. ประจำหมู่บ้าน หรือที่ทำการ อบต.สุรนารี
- หมดเขตรับสมัคร วันที่ 20 พฤษภาคม 2568

## หมายเหตุ

- การอบรมนี้ไม่มีค่าใช้จ่าย
- ผู้เข้าอบรมควรเตรียมเสื้อผ้าที่สะดวกต่อการปฏิบัติงาน
- สามารถนำตัวอย่างน้ำจากบ่อของท่านมาตรวจสอบได้ (ขวดสะอาด ขนาดอย่างน้อย 500 มิลลิลิตร)

สอบถามข้อมูลเพิ่มเติมได้ที่ ศูนย์ประสานงานโครงการเครือข่ายน้ำดี สุรนารี โทร. 0xx-xxx-xxxx`,
      image: "/placeholder.svg?height=200&width=300",
      category: "training",
    },
    {
      id: "water-quality-survey",
      title: "ผลการสำรวจคุณภาพน้ำบาดาลในพื้นที่",
      date: "30 เม.ย. 2568",
      excerpt: "สรุปผลการสำรวจคุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี ประจำไตรมาสที่ 1/2568",
      content: `# ผลการสำรวจคุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี ประจำไตรมาสที่ 1/2568

โครงการเครือข่ายน้ำดี สุรนารี ได้ดำเนินการสำรวจและตรวจสอบคุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี ระหว่างเดือนมกราคม - มีนาคม 2568 โดยมีผลการสำรวจดังนี้

## ข้อมูลทั่วไป

- **จำนวนบ่อที่สำรวจ**: 120 บ่อ
- **พื้นที่ครอบคลุม**: 8 หมู่บ้าน ในตำบลสุรนารี
- **ความลึกเฉลี่ยของบ่อ**: 42 เมตร
- **อายุเฉลี่ยของบ่อ**: 8.5 ปี

## ผลการตรวจคุณภาพน้ำ

### สรุปภาพรวม

- **คุณภาพดี (ผ่านเกณฑ์มาตรฐาน)**: 68 บ่อ (56.7%)
- **คุณภาพพอใช้ (ต้องปรับปรุงเล็กน้อย)**: 42 บ่อ (35.0%)
- **คุณภาพไม่ดี (ไม่ผ่านเกณฑ์มาตรฐาน)**: 10 บ่อ (8.3%)

### พารามิเตอร์ที่ตรวจพบปัญหา

1. **ความกระด้าง**
   - พบเกินมาตรฐานในพื้นที่หมู่ 3, 4 และ 7
   - ค่าเฉลี่ย: 320 mg/L (มาตรฐาน: ไม่เกิน 300 mg/L)

2. **เหล็ก**
   - พบเกินมาตรฐานในพื้นที่หมู่ 2 และ 5
   - ค่าเฉลี่ย: 0.5 mg/L (มาตรฐาน: ไม่เกิน 0.3 mg/L)

3. **แมงกานีส**
   - พบเกินมาตรฐานในพื้นที่หมู่ 1 และ 8
   - ค่าเฉลี่ย: 0.4 mg/L (มาตรฐาน: ไม่เกิน 0.3 mg/L)

4. **ฟลูออไรด์**
   - พบเกินมาตรฐานในพื้นที่หมู่ 6
   - ค่าเฉลี่ย: 0.9 mg/L (มาตรฐาน: ไม่เกิน 0.7 mg/L)

5. **โคลิฟอร์มแบคทีเรีย**
   - พบในบ่อที่อยู่ใกล้แหล่งน้ำเสียหรือคอกสัตว์
   - พบในบ่อที่ไม่มีการปิดปากบ่ออย่างมิดชิด

## การวิเคราะห์ตามพื้นที่

### พื้นที่ที่มีคุณภาพน้ำดี
- หมู่ 1 บ้านโนนสูง (80% ของบ่อมีคุณภาพดี)
- หมู่ 8 บ้านหนองไผ่ (75% ของบ่อมีคุณภาพดี)

### พื้นที่ที่มีปัญหาคุณภาพน้ำ
- หมู่ 3 บ้านหนองกระทุ่ม (50% ของบ่อมีปัญหาความกระด้างสูง)
- หมู่ 6 บ้านโคกสูง (40% ของบ่อมีปัญหาฟลูออไรด์สูง)

## ข้อเสนอแนะ

### สำหรับพื้นที่ที่มีความกระด้างสูง
- ติดตั้งเครื่องกรองน้ำแบบเรซิน (Water Softener)
- ต้มน้ำก่อนใช้เพื่อตกตะกอนความกระด้างชั่วคราว

### สำหรับพื้นที่ที่มีเหล็กและแมงกานีสสูง
- ติดตั้งเครื่องกรองเหล็กและแมงกานีส
- ใช้ระบบเติมอากาศก่อนการกรอง

### สำหรับพื้นที่ที่มีฟลูออไรด์สูง
- ใช้ระบบกรองแบบ Reverse Osmosis (RO)
- ใช้สารกรองเฉพาะสำหรับฟลูออไรด์

### สำหรับบ่อที่พบโคลิฟอร์มแบคทีเรีย
- ปรับปรุงโครงสร้างปากบ่อให้มิดชิด
- ย้ายแหล่งกำเนิดมลพิษให้ห่างจากบ่อ
- ฆ่าเชื้อโรคด้วยคลอรีนหรือระบบ UV

## แผนการดำเนินงานต่อไป

1. จัดอบรมให้ความรู้เกี่ยวกับการปรับปรุงคุณภาพน้ำในพื้นที่ที่มีปัญหา
2. สนับสนุนการติดตั้งระบบกรองน้ำที่เหมาะสมในพื้นที่นำร่อง
3. ติดตามตรวจสอบคุณภาพน้ำอย่างต่อเนื่องทุก 3 เดือน
4. จัดทำแผนที่คุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี

## ช่องทางการเข้าถึงข้อมูล

ประชาชนในพื้นที่สามารถตรวจสอบข้อมูลคุณภาพน้ำบาดาลในพื้นที่ของตนเองได้ผ่านแอปพลิเคชัน "เครือข่ายน้ำดี สุรนารี" หรือติดต่อ อสม. ประจำหมู่บ้าน

สอบถามข้อมูลเพิ่มเติมได้ที่ ศูนย์ประสานงานโครงการเครือข่ายน้ำดี สุรนารี โทร. 0xx-xxx-xxxx`,
      image: "/placeholder.svg?height=200&width=300",
      category: "report",
    },
    {
      id: "new-water-testing-equipment",
      title: "โครงการได้รับเครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพา",
      date: "15 เม.ย. 2568",
      excerpt: "โครงการเครือข่ายน้ำดี สุรนารี ได้รับการสนับสนุนเครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพาจากกรมทรัพยากรน้ำบาดาล",
      content: `# โครงการได้รับเครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพา

โครงการเครือข่ายน้ำดี สุรนารี มีความยินดีที่จะแจ้งให้ทราบว่า โครงการได้รับการสนับสนุนเครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพาจากกรมทรัพยากรน้ำบาดาล เพื่อใช้ในการตรวจสอบคุณภาพน้ำบาดาลในพื้นที่ตำบลสุรนารี

## รายละเอียดเครื่องมือ

เครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพารุ่นใหม่นี้มีความสามารถในการตรวจวัดพารามิเตอร์ต่างๆ ดังนี้:

1. **ค่า pH** - วัดความเป็นกรด-ด่างของน้ำ
2. **ค่าการนำไฟฟ้า (EC)** - บ่งชี้ปริมาณแร่ธาตุที่ละลายในน้ำ
3. **ปริมาณของแข็งที่ละลายทั้งหมด (TDS)** - วัดปริมาณสารที่ละลายในน้ำ
4. **ความขุ่น (Turbidity)** - วัดความใสของน้ำ
5. **อุณหภูมิ** - วัดอุณหภูมิของน้ำ
6. **ปริมาณคลอรีนอิสระ** - ตรวจวัดปริมาณคลอรีนในน้ำ
7. **ปริมาณเหล็ก** - ตรวจวัดปริมาณเหล็กในน้ำ
8. **ความกระด้าง** - วัดปริมาณแคลเซียมและแมกนีเซียมในน้ำ

## ประโยชน์ที่ประชาชนจะได้รับ

การมีเครื่องตรวจวิเคราะห์คุณภาพน้ำแบบพกพานี้จะช่วยให้โครงการสามารถให้บริการแก่ประชาชนได้ดียิ่งขึ้น ดังนี้:

1. **ตรวจสอบได้รวดเร็ว** - ทราบผลการตรวจวิเคราะห์ภายใน 5-10 นาที
2. **ครอบคลุมพื้นที่มากขึ้น** - สามารถนำไปตรวจในพื้นที่ห่างไกลได้
3. **ตรวจได้บ่อยขึ้น** - เพิ่มความถี่ในการตรวจสอบคุณภาพน้ำ
4. **ประหยัดค่าใช้จ่าย** - ลดค่าใช้จ่ายในการส่งตัวอย่างไปตรวจที่ห้องปฏิบัติการ

## แผนการให้บริการ

โครงการได้วางแผนการให้บริการตรวจวิเคราะห์คุณภาพน้ำด้วยเครื่องมือใหม่นี้ ดังนี้:

1. **บริการตรวจน้ำเคลื่อนที่** - จะมีการออกหน่วยเคลื่อนที่ไปยังหมู่บ้านต่างๆ ในตำบลสุรนารี ตามตารางที่กำหนด
2. **บริการตรวจน้ำตามคำขอ** - ประชาชนสามารถขอรับบริการตรวจน้ำได้โดยติดต่อผ่าน อสม. ประจำหมู่บ้าน
3. **การเฝ้าระวังคุณภาพน้ำ** - จะมีการตรวจสอบคุณภาพน้ำในบ่อสาธารณะและบ่อที่เคยพบปัญหาอย่างสม่ำเสมอ

## กำหนดการออกหน่วยเคลื่อนที่

| วันที่ | เวลา | สถานที่ |
|-------|------|---------|
| 20 เม.ย. 2568 | 09.00-12.00 น. | หมู่ 1 บ้านโนนสูง (ศาลากลางบ้าน) |
| 20 เม.ย. 2568 | 13.00-16.00 น. | หมู่ 2 บ้านหนองแวง (ศาลากลางบ้าน) |
| 21 เม.ย. 2568 | 09.00-12.00 น. | หมู่ 3 บ้านหนองกระทุ่ม (ศาลากลางบ้าน) |
| 21 เม.ย. 2568 | 13.00-16.00 น. | หมู่ 4 บ้านโนนกระสัง (ศาลากลางบ้าน) |
| 27 เม.ย. 2568 | 09.00-12.00 น. | หมู่ 5 บ้านหนองบัว (ศาลากลางบ้าน) |
| 27 เม.ย. 2568 | 13.00-16.00 น. | หมู่ 6 บ้านโคกสูง (ศาลากลางบ้าน) |
| 28 เม.ย. 2568 | 09.00-12.00 น. | หมู่ 7 บ้านหนองไทร (ศาลากลางบ้าน) |
| 28 เม.ย. 2568 | 13.00-16.00 น. | หมู่ 8 บ้านหนองไผ่ (ศาลากลางบ้าน) |

## วิธีการเตรียมตัวอย่างน้ำ

หากท่านต้องการนำน้ำมาตรวจ กรุณาเตรียมตัวอย่างน้ำตามคำแนะนำดังนี้:

1. ใช้ขวดสะอาด ขนาดอย่างน้อย 500 มิลลิลิตร
2. ล้างขวดด้วยน้ำที่ต้องการตรวจ 2-3 ครั้ง
3. เก็บตัวอย่างน้ำให้เต็มขวด ปิดฝาให้สนิท
4. นำมาตรวจภายใน 24 ชั่วโมงหลังเก็บตัวอย่าง
5. เก็บในที่เย็น ไม่โดนแสงแดด

## การติดต่อขอรับบริการ

ประชาชนในพื้นที่ตำบลสุรนารีสามารถติดต่อขอรับบริการตรวจวิเคราะห์คุณภาพน้ำได้ที่:

- อสม. ประจำหมู่บ้าน
- ศูนย์ประสานงานโครงการเครือข่ายน้ำดี สุรนารี โทร. 0xx-xxx-xxxx
- แอปพลิเคชัน "เครือข่ายน้ำดี สุรนารี"

โครงการเครือข่ายน้ำดี สุรนารี ขอขอบคุณกรมทรัพยากรน้ำบาดาลที่ให้การสนับสนุนเครื่องมือที่มีประโยชน์นี้ และหวังเป็นอย่างยิ่งว่าจะสามารถให้บริการที่ดียิ่งขึ้นแก่ประชาชนในพื้นที่ต่อไป`,
      image: "/placeholder.svg?height=200&width=300",
      category: "news",
    },
  ]

  const filteredNews = news.filter((item) => {
    // Filter by category
    if (activeCategory !== "all" && item.category !== activeCategory) {
      return false
    }

    // Filter by search query
    if (
      searchQuery &&
      !item.title.toLowerCase().includes(searchQuery.toLowerCase()) &&
      !item.excerpt.toLowerCase().includes(searchQuery.toLowerCase())
    ) {
      return false
    }

    return true
  })

  const categories = [
    { id: "all", name: "ทั้งหมด" },
    { id: "event", name: "กิจกรรม" },
    { id: "training", name: "อบรม" },
    { id: "report", name: "รายงาน" },
    { id: "news", name: "ข่าวสาร" },
  ]

  return (
    <div className="rounded-lg bg-white p-4 shadow-md">
      <h3 className="mb-3 text-center font-bold">ข่าวสารโครงการ</h3>

      {/* Search and Filter */}
      <div className="mb-4 space-y-3">
        <div className="relative">
          <Search className="absolute left-2 top-2.5 h-4 w-4 text-gray-400" />
          <Input
            type="text"
            placeholder="ค้นหาข่าวสาร..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-8"
          />
        </div>

        <div className="flex flex-wrap gap-1">
          {categories.map((category) => (
            <button
              key={category.id}
              onClick={() => setActiveCategory(category.id)}
              className={`rounded-full px-3 py-1 text-xs ${
                activeCategory === category.id
                  ? "bg-[#00B900] text-white"
                  : "bg-gray-100 text-gray-700 hover:bg-gray-200"
              }`}
            >
              {category.name}
            </button>
          ))}
        </div>
      </div>

      {/* News List */}
      <div className="space-y-4">
        {filteredNews.length > 0 ? (
          filteredNews.map((item) => (
            <div key={item.id} className="flex rounded-lg border border-gray-200 p-2">
              <div className="mr-3 h-20 w-[30%] flex-shrink-0 overflow-hidden rounded-md bg-gray-100">
                <img src={item.image || "/placeholder.svg"} alt={item.title} className="h-full w-full object-cover" />
              </div>
              <div className="flex-1">
                <h4 className="mb-1 font-medium leading-tight">{item.title}</h4>
                <div className="mb-1 text-xs text-gray-500">{item.date}</div>
                <p className="text-xs text-gray-600 line-clamp-2">{item.excerpt}</p>
                <div className="mt-1 text-right">
                  <button
                    onClick={() =>
                      viewNewsDetail({
                        title: item.title,
                        date: item.date,
                        content: item.content,
                        image: item.image,
                      })
                    }
                    className="text-xs text-blue-600"
                  >
                    อ่านต่อ →
                  </button>
                </div>
              </div>
            </div>
          ))
        ) : (
          <div className="rounded-lg border border-gray-200 p-4 text-center">
            <p className="text-gray-500">ไม่พบข่าวสารที่ตรงกับการค้นหา</p>
          </div>
        )}
      </div>
    </div>
  )
}
